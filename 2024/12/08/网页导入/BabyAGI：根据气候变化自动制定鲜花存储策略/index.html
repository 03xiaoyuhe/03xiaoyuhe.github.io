<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
<link rel="stylesheet" href="/css/custom.css">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="你好，我是黄佳，欢迎来到 LangChain 实战课！ 在上节课中，我们深入探讨了如何利用 CAMEL 框架制定出一个高效的鲜花营销方案。然而，LangChain 目前是将基于 CAMEL 框架的代理定义为 Simulation Agents（模拟代理）。这种代理在模拟环境中进行角色扮演，试图模拟特定场景或行为，而不是在真实世界中完成具体的任务。 随着 ChatGPT 的崭露头角，我们迎来了一种新">
<meta property="og:type" content="article">
<meta property="og:title" content="O3xiaoyuhe">
<meta property="og:url" content="http://example.com/2024/12/08/%E7%BD%91%E9%A1%B5%E5%AF%BC%E5%85%A5/BabyAGI%EF%BC%9A%E6%A0%B9%E6%8D%AE%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E8%87%AA%E5%8A%A8%E5%88%B6%E5%AE%9A%E9%B2%9C%E8%8A%B1%E5%AD%98%E5%82%A8%E7%AD%96%E7%95%A5/index.html">
<meta property="og:site_name" content="O3xiaoyuhe">
<meta property="og:description" content="你好，我是黄佳，欢迎来到 LangChain 实战课！ 在上节课中，我们深入探讨了如何利用 CAMEL 框架制定出一个高效的鲜花营销方案。然而，LangChain 目前是将基于 CAMEL 框架的代理定义为 Simulation Agents（模拟代理）。这种代理在模拟环境中进行角色扮演，试图模拟特定场景或行为，而不是在真实世界中完成具体的任务。 随着 ChatGPT 的崭露头角，我们迎来了一种新">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://static001.geekbang.org/resource/image/85/bc/8527f131880785688eac48b10f7e5bbc.png?wh=800x533">
<meta property="og:image" content="https://static001.geekbang.org/resource/image/07/6c/07cbca8cfff33ffa231830eff145556c.png?wh=680x475">
<meta property="og:image" content="https://static001.geekbang.org/resource/image/7e/36/7ec5769743e7ddf58883ca74385cbd36.png?wh=1467x1453">
<meta property="og:image" content="https://static001.geekbang.org/resource/image/56/d1/56d4bdbcaec0deba243a4d7cf6eb71d1.jpg?wh=1482x666">
<meta property="article:published_time" content="2024-12-08T12:29:01.308Z">
<meta property="article:modified_time" content="2024-11-18T11:34:08.828Z">
<meta property="article:author" content="听">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://static001.geekbang.org/resource/image/85/bc/8527f131880785688eac48b10f7e5bbc.png?wh=800x533">

<link rel="canonical" href="http://example.com/2024/12/08/%E7%BD%91%E9%A1%B5%E5%AF%BC%E5%85%A5/BabyAGI%EF%BC%9A%E6%A0%B9%E6%8D%AE%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E8%87%AA%E5%8A%A8%E5%88%B6%E5%AE%9A%E9%B2%9C%E8%8A%B1%E5%AD%98%E5%82%A8%E7%AD%96%E7%95%A5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title> | O3xiaoyuhe</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">O3xiaoyuhe</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2024/12/08/%E7%BD%91%E9%A1%B5%E5%AF%BC%E5%85%A5/BabyAGI%EF%BC%9A%E6%A0%B9%E6%8D%AE%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E8%87%AA%E5%8A%A8%E5%88%B6%E5%AE%9A%E9%B2%9C%E8%8A%B1%E5%AD%98%E5%82%A8%E7%AD%96%E7%95%A5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="听">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="O3xiaoyuhe">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-08 20:29:01" itemprop="dateCreated datePublished" datetime="2024-12-08T20:29:01+08:00">2024-12-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-11-18 19:34:08" itemprop="dateModified" datetime="2024-11-18T19:34:08+08:00">2024-11-18</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>你好，我是黄佳，欢迎来到 LangChain 实战课！</p>
<p>在上节课中，我们深入探讨了如何利用 CAMEL 框架制定出一个高效的鲜花营销方案。然而，LangChain 目前是将基于 CAMEL 框架的代理定义为 Simulation Agents（模拟代理）。这种代理在模拟环境中进行角色扮演，试图模拟特定场景或行为，而不是在真实世界中完成具体的任务。</p>
<p>随着 ChatGPT 的崭露头角，我们迎来了一种新型的代理——Autonomous Agents（自治代理或自主代理）。这些代理的设计初衷就是能够独立地执行任务，并持续地追求长期目标。在 LangChain 的代理、工具和记忆这些组件的支持下，<strong>它们能够在无需外部干预的情况下自主运行，这在真实世界的应用中具有巨大的价值。</strong></p>
<p>目前，GitHub 上已有好几个备受关注的 “网红” 项目，如 AutoGPT、BabyAGI 和 HuggingGPT，它们都代表了自治代理的初步尝试。尽管这些代理仍处于实验阶段，但潜力十分巨大。它们都是基于 LangChain 框架构建的。通过 LangChain，你可以在这些开源项目中轻松地切换和测试多种 LLM、使用多种向量存储作为记忆，以及充分利用 LangChain 的丰富工具集。</p>
<p>今天的这节课，我就带着你看一看这些项目，同时也通过 LangChain 完成一个 BabyAGI 的实现。</p>
<h2 id="AutoGPT">AutoGPT</h2>
<p>Auto-GPT 是由 Toran Bruce Richards 创建的一个开源的自主 AI 代理，基于 OpenAI 的 GPT-4 语言模型。它的主要功能是<strong>自动链接多个任务</strong>，以实现用户设定的大目标。与传统的聊天机器人（如 ChatGPT）不同，用户只需提供一个提示或一组自然语言指令，Auto-GPT 就会通过自动化多步提示过程，将目标分解为子任务，以达到其目标。</p>
<p><img src="https://static001.geekbang.org/resource/image/85/bc/8527f131880785688eac48b10f7e5bbc.png?wh=800x533" alt=""></p>
<p>Auto-GPT 一出世，就受到了广泛的宣传和追捧，Star 数量半年飙升到了 150K。</p>
<p><strong>为什么 Auto-GPT 吸引了这么多眼球？</strong></p>
<p>因为与 ChatGPT 相比，它能够与互联网集成，提供实时数据访问。Auto-GPT 将活动分解为子任务，自我提示（而不是像 ChatGPT 那样需要用户多次提示才能把复杂任务完善地完成），并重复该过程，直到达到所提供的目标。</p>
<p>技术上，Auto-GPT 使用短期记忆管理来保存上下文；同时 Auto-GPT 是多模态的，可以处理文本和图像作为输入。</p>
<p>从具体应用上说，Auto-GPT 可以用于各种任务，例如生成文本、执行特定操作和进行网络搜索等。它还可以作为研究助手，帮助用户进行科学研究、市场研究、内容创建、销售线索生成、业务计划创建、产品评论、播客大纲制定等。</p>
<p>当然，Auto-GPT 并不完善，作为一个实验性质的项目，它还存在诸多挑战，比如它的运行成本可能很高，而且它可能会分心或陷入循环。技术上，它的缺陷是没有长期记忆。</p>
<p>但是，作为一个开源项目，它的优势在于，它展示出了 AI 的边界和自主行动能力，凸显出了自主代理的潜力，也从实践上验证了人类正朝向人工普通智能（AGI）迈进。<strong>理论上说，更成熟的</strong> <strong>Auto-GPT</strong> <strong>版本可以启动与其他自主代理进行交互过程，实现 AI 代理之间的对话。</strong></p>
<p>Auto-GPT 在 GitHub 上的社区非常活跃，开发者可以分享他们使用 Auto-GPT 的进展和想法。Auto-GPT 还有一个 Hackathon 活动，鼓励开发者提交他们的代理进行基准测试和比较。</p>
<h2 id="Baby-AGI">Baby AGI</h2>
<p>BabyAGI 是由中岛洋平（Yohei Nakajima）于 2023 年 3 月 28 日开发的自主任务驱动 AI 系统。核心在于，它可以根据设定的目标生成、组织、确定优先级以及执行任务。它也使用 OpenAI 的 GPT-4 语言模型来理解和创建任务，利用 Pinecone 向量搜索来存储和检索特定任务的结果，提供执行任务的上下文，并采用 LangChain 框架进行决策。</p>
<p>BabyAGI 尝试使用预定义的目标进行自我驱动，自动化个人任务管理。它不仅可以自动生成和执行任务，而且还可以根据完成的任务结果生成新任务，并且可以实时确定任务的优先级。</p>
<p>与传统的 AI 工具（如 ChatGPT）不同，BabyAGI 不仅仅是解释查询和提供响应，而且能够根据目标生成任务列表，连续执行它们，并根据先前任务的输出适应性地创建更多任务。</p>
<p>和 Auto-GPT 一样，该系统发布后广受关注，也被某些人誉为<strong>完全自主人工智能的起点</strong>。</p>
<p>在 BabyAGI 中，你向系统提出一个目标之后，它将不断优先考虑需要实现或完成的任务，以实现该目标。具体来说，系统将形成任务列表，从任务列表中拉出优先级最高的第一个任务，使用 OpenAI API 根据上下文将任务发送到执行代理并完成任务，一旦这些任务完成，它们就会被存储在内存（或者 Pinecone 这类向量数据库）中，然后，根据目标和上一个任务的结果创建新任务并确定优先级。</p>
<p>整个过程如下图所示：</p>
<p><img src="https://static001.geekbang.org/resource/image/07/6c/07cbca8cfff33ffa231830eff145556c.png?wh=680x475" alt=""></p>
<p>在这个过程中，驱动任务的是三个不同作用的代理。分别是执行代理 execution_agent，任务创建代理 task_creation_agent，以及优先级设置代理 prioritization_agent。</p>
<ul class="lvl-0">
<li class="lvl-4">
<p><strong>执行代理</strong>，是系统的核心，利用 OpenAI 的 API 来处理任务。这个代理的实现函数有两个参数，目标和任务，用于向 OpenAI 的 API 发送提示，并以字符串形式返回任务结果。</p>
</li>
<li class="lvl-4">
<p><strong>任务创建代理</strong>，通过 OpenAI 的 API 根据当前对象和先前任务的结果创建新任务。这个代理的实现函数有四个参数，目标、上一个任务的结果、任务描述和当前任务列表。这个代理会向 OpenAI 的 API 发送一条提示，该 API 将以字符串形式返回新任务列表。然后，该函数将以字典列表的形式返回这些新任务，其中每个字典都包含任务的名称。</p>
</li>
<li class="lvl-4">
<p><strong>优先级设置代理</strong>，负责任务列表的排序和优先级，仍然是通过调用 OpenAI 的 API 来重新确定任务列表的优先级。这个代理的实现函数有一个参数，即当前任务的 ID。这个代理会向 OpenAI 的 API 发送提示，并返回已重新优先排序为编号列表的新任务列表。</p>
</li>
</ul>
<p>等一下，我就用这个 BabyAGI 的框架来带着你开发一个能够根据气候变化自动制定鲜花存储策略的 AI 智能代理。</p>
<h2 id="HuggingGPT">HuggingGPT</h2>
<p>在 Yongliang Shen 的论文《HuggingGPT: Solving AI Tasks with ChatGPT and its Friends in Hugging Face》中，介绍了 HuggingGPT 的系统。HuggingGPT 的工作流程包括四个阶段。</p>
<ol>
<li class="lvl-4">
<p>任务规划：LLM（例如 ChatGPT）解析用户请求，生成任务列表，并确定任务之间的执行顺序和资源依赖关系。</p>
</li>
<li class="lvl-4">
<p>模型选择：LLM 根据 Hugging Face 上的专家模型描述，为任务分配适当的模型。</p>
</li>
<li class="lvl-4">
<p>任务执行：整合各个任务端点上的专家模型，执行分配的任务。</p>
</li>
<li class="lvl-4">
<p>响应生成：LLM 整合专家的推断结果，生成工作流摘要，并给用户提供最终的响应。</p>
</li>
</ol>
<p>HuggingGPT 的设计，使其能够根据用户请求自动生成计划，并使用外部模型，从而整合多模态感知能力，并处理多个复杂的 AI 任务。此外，这种流程还允许 HuggingGPT 持续从任务特定的专家模型中吸收能力，从而实现可增长和可扩展的 AI 能力。</p>
<p><img src="https://static001.geekbang.org/resource/image/7e/36/7ec5769743e7ddf58883ca74385cbd36.png?wh=1467x1453" alt=""></p>
<p>文章还提到，HuggingGPT 的优势在于，<strong>它能够使用不同的模型来执行特定的任务</strong>，如图像分类、对象检测、图像描述等。例如，它使用 OpenCV 的 OpenPose 模型来分析图像中小朋友的姿势，并使用其他模型生成新图像和描述。</p>
<p>不难看出，尽管实现过程各有特点，但这些自主类的 AI 代理应用的基本思想和流程还是很类似的。关键是利用 LLM 的推理能力生成任务，确定任务优先级，然后执行任务，实现目标。</p>
<h2 id="根据气候变化自动制定鲜花存储策略">根据气候变化自动制定鲜花存储策略</h2>
<p>下面，我们就解析一下 LangChain 中 BabyAGI 的具体实现。这里的 “BabyAGI” 是一个简化版的实现，其核心功能是自动创建、优先级排序和执行任务。</p>
<p>首先，我们导入相关的库。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 设置API Key</span><br><span class="line">import os</span><br><span class="line">os.environ[&quot;OPENAI_API_KEY&quot;] = &#x27;Your OpenAI API Key</span><br><span class="line"></span><br><span class="line"># 导入所需的库和模块</span><br><span class="line">from collections import deque</span><br><span class="line">from typing import Dict, List, Optional, Any</span><br><span class="line">from langchain.chains import LLMChain</span><br><span class="line">from langchain.prompts import PromptTemplate</span><br><span class="line">from langchain.embeddings import OpenAIEmbeddings</span><br><span class="line">from langchain.llms import BaseLLM, OpenAI</span><br><span class="line">from langchain.vectorstores.base import VectorStore</span><br><span class="line">from pydantic import BaseModel, Field</span><br><span class="line">from langchain.chains.base import Chain</span><br><span class="line">from langchain.vectorstores import FAISS</span><br><span class="line">import faiss</span><br><span class="line">from langchain.docstore import InMemoryDocstore</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>然后，我们初始化 OpenAIEmbedding 作为嵌入模型，并使用 Faiss 作为向量数据库存储任务信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 定义嵌入模型</span><br><span class="line">embeddings_model = OpenAIEmbeddings()</span><br><span class="line"># 初始化向量存储</span><br><span class="line">embedding_size = 1536</span><br><span class="line">index = faiss.IndexFlatL2(embedding_size)</span><br><span class="line">vectorstore = FAISS(embeddings_model.embed_query, index, InMemoryDocstore(&#123;&#125;), &#123;&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>下面是定义任务生成链，基于给定的条件，这个链可以创建新任务。例如，它可以根据最后一个完成的任务的结果来生成新任务。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"># 任务生成链</span><br><span class="line">class TaskCreationChain(LLMChain):</span><br><span class="line">    &quot;&quot;&quot;负责生成任务的链&quot;&quot;&quot;</span><br><span class="line">    @classmethod</span><br><span class="line">    def from_llm(cls, llm: BaseLLM, verbose: bool = True) -&gt; LLMChain:</span><br><span class="line">        &quot;&quot;&quot;从LLM获取响应解析器&quot;&quot;&quot;</span><br><span class="line">        task_creation_template = (</span><br><span class="line">            &quot;You are a task creation AI that uses the result of an execution agent&quot;</span><br><span class="line">            &quot; to create new tasks with the following objective: &#123;objective&#125;,&quot;</span><br><span class="line">            &quot; The last completed task has the result: &#123;result&#125;.&quot;</span><br><span class="line">            &quot; This result was based on this task description: &#123;task_description&#125;.&quot;</span><br><span class="line">            &quot; These are incomplete tasks: &#123;incomplete_tasks&#125;.&quot;</span><br><span class="line">            &quot; Based on the result, create new tasks to be completed&quot;</span><br><span class="line">            &quot; by the AI system that do not overlap with incomplete tasks.&quot;</span><br><span class="line">            &quot; Return the tasks as an array.&quot;</span><br><span class="line">        )</span><br><span class="line">        prompt = PromptTemplate(</span><br><span class="line">            template=task_creation_template,</span><br><span class="line">            input_variables=[</span><br><span class="line">                &quot;result&quot;,</span><br><span class="line">                &quot;task_description&quot;,</span><br><span class="line">                &quot;incomplete_tasks&quot;,</span><br><span class="line">                &quot;objective&quot;,</span><br><span class="line">            ],</span><br><span class="line">        )</span><br><span class="line">        return cls(prompt=prompt, llm=llm, verbose=verbose)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>下面是定义任务优先级链，这个链负责重新排序任务的优先级。给定一个任务列表，它会返回一个新的按优先级排序的任务列表。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 任务优先级链</span><br><span class="line">class TaskPrioritizationChain(LLMChain):</span><br><span class="line">    &quot;&quot;&quot;负责任务优先级排序的链&quot;&quot;&quot;</span><br><span class="line">    @classmethod</span><br><span class="line">    def from_llm(cls, llm: BaseLLM, verbose: bool = True) -&gt; LLMChain:</span><br><span class="line">        &quot;&quot;&quot;从LLM获取响应解析器&quot;&quot;&quot;</span><br><span class="line">        task_prioritization_template = (</span><br><span class="line">            &quot;You are a task prioritization AI tasked with cleaning the formatting of and reprioritizing&quot;</span><br><span class="line">            &quot; the following tasks: &#123;task_names&#125;.&quot;</span><br><span class="line">            &quot; Consider the ultimate objective of your team: &#123;objective&#125;.&quot;</span><br><span class="line">            &quot; Do not remove any tasks. Return the result as a numbered list, like:&quot;</span><br><span class="line">            &quot; #. First task&quot;</span><br><span class="line">            &quot; #. Second task&quot;</span><br><span class="line">            &quot; Start the task list with number &#123;next_task_id&#125;.&quot;</span><br><span class="line">        )</span><br><span class="line">        prompt = PromptTemplate(</span><br><span class="line">            template=task_prioritization_template,</span><br><span class="line">            input_variables=[&quot;task_names&quot;, &quot;next_task_id&quot;, &quot;objective&quot;],</span><br><span class="line">        )</span><br><span class="line">        return cls(prompt=prompt, llm=llm, verbose=verbose)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>下面是定义任务执行链，这个链负责执行具体的任务，并返回结果。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 任务执行链</span><br><span class="line">class ExecutionChain(LLMChain):</span><br><span class="line">    &quot;&quot;&quot;负责执行任务的链&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def from_llm(cls, llm: BaseLLM, verbose: bool = True) -&gt; LLMChain:</span><br><span class="line">        &quot;&quot;&quot;从LLM获取响应解析器&quot;&quot;&quot;</span><br><span class="line">        execution_template = (</span><br><span class="line">            &quot;You are an AI who performs one task based on the following objective: &#123;objective&#125;.&quot;</span><br><span class="line">            &quot; Take into account these previously completed tasks: &#123;context&#125;.&quot;</span><br><span class="line">            &quot; Your task: &#123;task&#125;.&quot;</span><br><span class="line">            &quot; Response:&quot;</span><br><span class="line">        )</span><br><span class="line">        prompt = PromptTemplate(</span><br><span class="line">            template=execution_template,</span><br><span class="line">            input_variables=[&quot;objective&quot;, &quot;context&quot;, &quot;task&quot;],</span><br><span class="line">        )</span><br><span class="line">        return cls(prompt=prompt, llm=llm, verbose=verbose)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>之后，我们定义一系列功能函数，实现 get_next_task、prioritize_tasks、_get_top_tasks 以及 execute_task 等具体功能。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">def get_next_task(</span><br><span class="line">    task_creation_chain: LLMChain,</span><br><span class="line">    result: Dict,</span><br><span class="line">    task_description: str,</span><br><span class="line">    task_list: List[str],</span><br><span class="line">    objective: str,</span><br><span class="line">) -&gt; List[Dict]:</span><br><span class="line">    &quot;&quot;&quot;Get the next task.&quot;&quot;&quot;</span><br><span class="line">    incomplete_tasks = &quot;, &quot;.join(task_list)</span><br><span class="line">    response = task_creation_chain.run(</span><br><span class="line">        result=result,</span><br><span class="line">        task_description=task_description,</span><br><span class="line">        incomplete_tasks=incomplete_tasks,</span><br><span class="line">        objective=objective,</span><br><span class="line">    )</span><br><span class="line">    new_tasks = response.split(&quot;\n&quot;)</span><br><span class="line">    return [&#123;&quot;task_name&quot;: task_name&#125; for task_name in new_tasks if task_name.strip()]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def prioritize_tasks(</span><br><span class="line">    task_prioritization_chain: LLMChain,</span><br><span class="line">    this_task_id: int,</span><br><span class="line">    task_list: List[Dict],</span><br><span class="line">    objective: str,</span><br><span class="line">) -&gt; List[Dict]:</span><br><span class="line">    &quot;&quot;&quot;Prioritize tasks.&quot;&quot;&quot;</span><br><span class="line">    task_names = [t[&quot;task_name&quot;] for t in task_list]</span><br><span class="line">    next_task_id = int(this_task_id) + 1</span><br><span class="line">    response = task_prioritization_chain.run(</span><br><span class="line">        task_names=task_names, next_task_id=next_task_id, objective=objective</span><br><span class="line">    )</span><br><span class="line">    new_tasks = response.split(&quot;\n&quot;)</span><br><span class="line">    prioritized_task_list = []</span><br><span class="line">    for task_string in new_tasks:</span><br><span class="line">        if not task_string.strip():</span><br><span class="line">            continue</span><br><span class="line">        task_parts = task_string.strip().split(&quot;.&quot;, 1)</span><br><span class="line">        if len(task_parts) == 2:</span><br><span class="line">            task_id = task_parts[0].strip()</span><br><span class="line">            task_name = task_parts[1].strip()</span><br><span class="line">            prioritized_task_list.append(&#123;&quot;task_id&quot;: task_id, &quot;task_name&quot;: task_name&#125;)</span><br><span class="line">    return prioritized_task_list</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def _get_top_tasks(vectorstore, query: str, k: int) -&gt; List[str]:</span><br><span class="line">    &quot;&quot;&quot;Get the top k tasks based on the query.&quot;&quot;&quot;</span><br><span class="line">    results = vectorstore.similarity_search_with_score(query, k=k)</span><br><span class="line">    if not results:</span><br><span class="line">        return []</span><br><span class="line">    sorted_results, _ = zip(*sorted(results, key=lambda x: x[1], reverse=True))</span><br><span class="line">    return [str(item.metadata[&quot;task&quot;]) for item in sorted_results]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def execute_task(</span><br><span class="line">    vectorstore, execution_chain: LLMChain, objective: str, task: str, k: int = 5</span><br><span class="line">) -&gt; str:</span><br><span class="line">    &quot;&quot;&quot;Execute a task.&quot;&quot;&quot;</span><br><span class="line">    context = _get_top_tasks(vectorstore, query=objective, k=k)</span><br><span class="line">    return execution_chain.run(objective=objective, context=context, task=task)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>然后，我们定义 BabyAGI，这是主类，它控制整个系统的运行流程，包括添加任务、输出任务列表、执行任务等。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"># BabyAGI 主类</span><br><span class="line">class BabyAGI(Chain, BaseModel):</span><br><span class="line">    &quot;&quot;&quot;BabyAGI代理的控制器模型&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">    task_list: deque = Field(default_factory=deque)</span><br><span class="line">    task_creation_chain: TaskCreationChain = Field(...)</span><br><span class="line">    task_prioritization_chain: TaskPrioritizationChain = Field(...)</span><br><span class="line">    execution_chain: ExecutionChain = Field(...)</span><br><span class="line">    task_id_counter: int = Field(1)</span><br><span class="line">    vectorstore: VectorStore = Field(init=False)</span><br><span class="line">    max_iterations: Optional[int] = None</span><br><span class="line"></span><br><span class="line">    class Config:</span><br><span class="line">        &quot;&quot;&quot;Configuration for this pydantic object.&quot;&quot;&quot;</span><br><span class="line"></span><br><span class="line">        arbitrary_types_allowed = True</span><br><span class="line"></span><br><span class="line">    def add_task(self, task: Dict):</span><br><span class="line">        self.task_list.append(task)</span><br><span class="line"></span><br><span class="line">    def print_task_list(self):</span><br><span class="line">        print(&quot;\033[95m\033[1m&quot; + &quot;\n*****TASK LIST*****\n&quot; + &quot;\033[0m\033[0m&quot;)</span><br><span class="line">        for t in self.task_list:</span><br><span class="line">            print(str(t[&quot;task_id&quot;]) + &quot;: &quot; + t[&quot;task_name&quot;])</span><br><span class="line"></span><br><span class="line">    def print_next_task(self, task: Dict):</span><br><span class="line">        print(&quot;\033[92m\033[1m&quot; + &quot;\n*****NEXT TASK*****\n&quot; + &quot;\033[0m\033[0m&quot;)</span><br><span class="line">        print(str(task[&quot;task_id&quot;]) + &quot;: &quot; + task[&quot;task_name&quot;])</span><br><span class="line"></span><br><span class="line">    def print_task_result(self, result: str):</span><br><span class="line">        print(&quot;\033[93m\033[1m&quot; + &quot;\n*****TASK RESULT*****\n&quot; + &quot;\033[0m\033[0m&quot;)</span><br><span class="line">        print(result)</span><br><span class="line"></span><br><span class="line">    @property</span><br><span class="line">    def input_keys(self) -&gt; List[str]:</span><br><span class="line">        return [&quot;objective&quot;]</span><br><span class="line"></span><br><span class="line">    @property</span><br><span class="line">    def output_keys(self) -&gt; List[str]:</span><br><span class="line">        return []</span><br><span class="line"></span><br><span class="line">    def _call(self, inputs: Dict[str, Any]) -&gt; Dict[str, Any]:</span><br><span class="line">        &quot;&quot;&quot;Run the agent.&quot;&quot;&quot;</span><br><span class="line">        objective = inputs[&quot;objective&quot;]</span><br><span class="line">        first_task = inputs.get(&quot;first_task&quot;, &quot;Make a todo list&quot;)</span><br><span class="line">        self.add_task(&#123;&quot;task_id&quot;: 1, &quot;task_name&quot;: first_task&#125;)</span><br><span class="line">        num_iters = 0</span><br><span class="line">        while True:</span><br><span class="line">            if self.task_list:</span><br><span class="line">                self.print_task_list()</span><br><span class="line"></span><br><span class="line">                # Step 1: Pull the first task</span><br><span class="line">                task = self.task_list.popleft()</span><br><span class="line">                self.print_next_task(task)</span><br><span class="line"></span><br><span class="line">                # Step 2: Execute the task</span><br><span class="line">                result = execute_task(</span><br><span class="line">                    self.vectorstore, self.execution_chain, objective, task[&quot;task_name&quot;]</span><br><span class="line">                )</span><br><span class="line">                this_task_id = int(task[&quot;task_id&quot;])</span><br><span class="line">                self.print_task_result(result)</span><br><span class="line"></span><br><span class="line">                # Step 3: Store the result in Pinecone</span><br><span class="line">                result_id = f&quot;result_&#123;task[&#x27;task_id&#x27;]&#125;_&#123;num_iters&#125;&quot;</span><br><span class="line">                self.vectorstore.add_texts(</span><br><span class="line">                    texts=[result],</span><br><span class="line">                    metadatas=[&#123;&quot;task&quot;: task[&quot;task_name&quot;]&#125;],</span><br><span class="line">                    ids=[result_id],</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line">                # Step 4: Create new tasks and reprioritize task list</span><br><span class="line">                new_tasks = get_next_task(</span><br><span class="line">                    self.task_creation_chain,</span><br><span class="line">                    result,</span><br><span class="line">                    task[&quot;task_name&quot;],</span><br><span class="line">                    [t[&quot;task_name&quot;] for t in self.task_list],</span><br><span class="line">                    objective,</span><br><span class="line">                )</span><br><span class="line">                for new_task in new_tasks:</span><br><span class="line">                    self.task_id_counter += 1</span><br><span class="line">                    new_task.update(&#123;&quot;task_id&quot;: self.task_id_counter&#125;)</span><br><span class="line">                    self.add_task(new_task)</span><br><span class="line">                self.task_list = deque(</span><br><span class="line">                    prioritize_tasks(</span><br><span class="line">                        self.task_prioritization_chain,</span><br><span class="line">                        this_task_id,</span><br><span class="line">                        list(self.task_list),</span><br><span class="line">                        objective,</span><br><span class="line">                    )</span><br><span class="line">                )</span><br><span class="line">            num_iters += 1</span><br><span class="line">            if self.max_iterations is not None and num_iters == self.max_iterations:</span><br><span class="line">                print(</span><br><span class="line">                    &quot;\033[91m\033[1m&quot; + &quot;\n*****TASK ENDING*****\n&quot; + &quot;\033[0m\033[0m&quot;</span><br><span class="line">                )</span><br><span class="line">                break</span><br><span class="line">        return &#123;&#125;</span><br><span class="line"></span><br><span class="line">    @classmethod</span><br><span class="line">    def from_llm(</span><br><span class="line">        cls, llm: BaseLLM, vectorstore: VectorStore, verbose: bool = False, **kwargs</span><br><span class="line">    ) -&gt; &quot;BabyAGI&quot;:</span><br><span class="line">        &quot;&quot;&quot;Initialize the BabyAGI Controller.&quot;&quot;&quot;</span><br><span class="line">        task_creation_chain = TaskCreationChain.from_llm(llm, verbose=verbose)</span><br><span class="line">        task_prioritization_chain = TaskPrioritizationChain.from_llm(</span><br><span class="line">            llm, verbose=verbose</span><br><span class="line">        )</span><br><span class="line">        execution_chain = ExecutionChain.from_llm(llm, verbose=verbose)</span><br><span class="line">        return cls(</span><br><span class="line">            task_creation_chain=task_creation_chain,</span><br><span class="line">            task_prioritization_chain=task_prioritization_chain,</span><br><span class="line">            execution_chain=execution_chain,</span><br><span class="line">            vectorstore=vectorstore,</span><br><span class="line">            **kwargs,</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>主执行部分，这是代码的入口点，定义了一个目标（分析北京市今天的气候情况，并提出鲜花储存策略），然后初始化并运行 BabyAGI。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 主执行部分</span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    OBJECTIVE = &quot;分析一下北京市今天的气候情况，写出鲜花储存策略。&quot;</span><br><span class="line">    llm = OpenAI(temperature=0)</span><br><span class="line">    verbose = False</span><br><span class="line">    max_iterations: Optional[int] = 6</span><br><span class="line">    baby_agi = BabyAGI.from_llm(llm=llm, vectorstore=vectorstore, </span><br><span class="line">                                verbose=verbose, </span><br><span class="line">                                max_iterations=max_iterations)</span><br><span class="line">    baby_agi(&#123;&quot;objective&quot;: OBJECTIVE&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>运行这个程序之后，产生了下面的结果。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line">&#x27;&#x27;&#x27;*****TASK LIST*****</span><br><span class="line"></span><br><span class="line">1: Make a todo list</span><br><span class="line"></span><br><span class="line">*****NEXT TASK*****</span><br><span class="line"></span><br><span class="line">1: Make a todo list</span><br><span class="line"></span><br><span class="line">*****TASK RESULT*****</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1. Gather data on current weather conditions in Beijing, including temperature, humidity, wind speed, and precipitation.</span><br><span class="line"></span><br><span class="line">2. Analyze the data to determine the best storage strategy for flowers.</span><br><span class="line"></span><br><span class="line">3. Research the optimal temperature, humidity, and other environmental conditions for flower storage.</span><br><span class="line"></span><br><span class="line">4. Develop a plan for storing flowers in Beijing based on the data and research.</span><br><span class="line"></span><br><span class="line">5. Implement the plan and monitor the flowers for any changes in condition.</span><br><span class="line"></span><br><span class="line">6. Make adjustments to the plan as needed.</span><br><span class="line"></span><br><span class="line">*****TASK LIST*****</span><br><span class="line"></span><br><span class="line">2: Identify the most suitable materials for flower storage in Beijing.</span><br><span class="line">3: Investigate the effects of temperature, humidity, and other environmental factors on flower storage.</span><br><span class="line">4: Research the best methods for preserving flowers in Beijing.</span><br><span class="line">5: Develop a plan for storing flowers in Beijing that takes into account the data and research.</span><br><span class="line">6: Monitor the flowers for any changes in condition and make adjustments to the plan as needed.</span><br><span class="line">7: Analyze the current climate conditions in Beijing and write out a strategy for flower storage.</span><br><span class="line">8: Create a report summarizing the findings and recommendations for flower storage in Beijing.</span><br><span class="line"></span><br><span class="line">*****NEXT TASK*****</span><br><span class="line"></span><br><span class="line">2: Identify the most suitable materials for flower storage in Beijing.</span><br><span class="line"></span><br><span class="line">*****TASK RESULT*****</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">In order to store flowers in Beijing, it is important to consider the current weather conditions. Today, the temperature in Beijing is around 18°C with a humidity of around 70%. This means that the air is relatively dry and cool, making it suitable for storing flowers.</span><br><span class="line"></span><br><span class="line">The best materials for flower storage in Beijing would be materials that are breathable and moisture-resistant. Examples of suitable materials include paper, cardboard, and fabric. These materials will help to keep the flowers fresh and prevent them from wilting. Additionally, it is important to keep the flowers away from direct sunlight and heat sources, as this can cause them to dry out quickly.</span><br><span class="line"></span><br><span class="line">*****TASK LIST*****</span><br><span class="line"></span><br><span class="line">3: Analyze the current climate conditions in Beijing and write out a strategy for flower storage.</span><br><span class="line">4: Investigate the effects of temperature, humidity, and other environmental factors on flower storage in Beijing.</span><br><span class="line">5: Research the best methods for preserving flowers in Beijing.</span><br><span class="line">6: Develop a plan for storing flowers in Beijing that takes into account the data and research.</span><br><span class="line">7: Monitor the flowers for any changes in condition and make adjustments to the plan as needed.</span><br><span class="line">8: Create a report summarizing the findings and recommendations for flower storage in Beijing, and provide suggestions for improvement.</span><br><span class="line"></span><br><span class="line">*****NEXT TASK*****</span><br><span class="line"></span><br><span class="line">3: Analyze the current climate conditions in Beijing and write out a strategy for flower storage.</span><br><span class="line"></span><br><span class="line">*****TASK RESULT*****</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Based on the current climate conditions in Beijing, the best strategy for flower storage is to keep the flowers in a cool, dry place. This means avoiding direct sunlight and keeping the flowers away from any sources of heat. Additionally, it is important to keep the flowers away from any sources of moisture, such as humidifiers or air conditioners. The flowers should also be kept away from any sources of strong odors, such as perfumes or cleaning products. Finally, it is important to keep the flowers away from any sources of pests, such as insects or rodents. To ensure the flowers remain in optimal condition, it is important to regularly check the temperature and humidity levels in the storage area.</span><br><span class="line"></span><br><span class="line">*****TASK LIST*****</span><br><span class="line"></span><br><span class="line">4: Monitor the flowers for any changes in condition and make adjustments to the plan as needed.</span><br><span class="line">1: Analyze the impact of different types of flowers on flower storage in Beijing.</span><br><span class="line">2: Compare the effectiveness of different flower storage strategies in Beijing.</span><br><span class="line">3: Investigate the effects of temperature, humidity, and other environmental factors on flower storage in Beijing.</span><br><span class="line">5: Research the best methods for preserving flowers in Beijing.</span><br><span class="line">6: Develop a plan for storing flowers in Beijing that takes into account the data and research.</span><br><span class="line">7: Investigate the effects of different storage materials on flower preservation in Beijing.</span><br><span class="line">8: Develop a system for monitoring the condition of flowers in storage in Beijing.</span><br><span class="line">9: Create a checklist for flower storage in Beijing that can be used to ensure optimal conditions.</span><br><span class="line">10: Identify potential risks associated with flower storage in Beijing and develop strategies to mitigate them.</span><br><span class="line">11: Create a report summarizing the findings and recommendations for flower storage in Beijing, and provide suggestions for improvement.</span><br><span class="line"></span><br><span class="line">*****NEXT TASK*****</span><br><span class="line"></span><br><span class="line">4: Monitor the flowers for any changes in condition and make adjustments to the plan as needed.</span><br><span class="line"></span><br><span class="line">*****TASK RESULT*****</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">I will monitor the flowers for any changes in condition and make adjustments to the plan as needed. This includes checking for signs of wilting, discoloration, or other signs of deterioration. I will also monitor the temperature and humidity levels in the storage area to ensure that the flowers are kept in optimal conditions. If necessary, I will adjust the storage plan to ensure that the flowers remain in good condition. Additionally, I will keep track of the expiration date of the flowers and adjust the storage plan accordingly.</span><br><span class="line"></span><br><span class="line">*****TASK LIST*****</span><br><span class="line"></span><br><span class="line">5: Analyze the current climate conditions in Beijing and how they affect flower storage.</span><br><span class="line">6: Investigate the effects of different storage containers on flower preservation in Beijing.</span><br><span class="line">7: Develop a system for tracking the condition of flowers in storage in Beijing.</span><br><span class="line">8: Identify potential pests and diseases that could affect flower storage in Beijing and develop strategies to prevent them.</span><br><span class="line">9: Create a report summarizing the findings and recommendations for flower storage in Beijing, and provide suggestions for improvement.</span><br><span class="line">10: Develop a plan for storing flowers in Beijing that takes into account the data and research.</span><br><span class="line">11: Compare the cost-effectiveness of different flower storage strategies in Beijing.</span><br><span class="line">12: Research the best methods for preserving flowers in Beijing in different seasons.</span><br><span class="line">13: Investigate the effects of temperature, humidity, and other environmental factors on flower storage in Beijing.</span><br><span class="line">14: Investigate the effects of different storage materials on flower preservation in Beijing.</span><br><span class="line">15: Analyze the impact of different types of flowers on flower storage in Beijing.</span><br><span class="line">16: Compare the effectiveness of different flower storage strategies in Beijing.</span><br><span class="line">17: Create a checklist for flower storage in Beijing that can be used to ensure optimal conditions.</span><br><span class="line">18: Identify potential risks associated with flower storage in</span><br><span class="line"></span><br><span class="line">*****NEXT TASK*****</span><br><span class="line"></span><br><span class="line">5: Analyze the current climate conditions in Beijing and how they affect flower storage.</span><br><span class="line"></span><br><span class="line">*****TASK RESULT*****</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Based on the current climate conditions in Beijing, the most suitable materials for flower storage would be materials that are breathable and moisture-resistant. This would include materials such as burlap, cotton, and linen. Additionally, it is important to ensure that the flowers are stored in a cool, dry place, away from direct sunlight. Furthermore, it is important to monitor the flowers for any changes in condition and make adjustments to the plan as needed. Finally, it is important to make a to-do list to ensure that all necessary steps are taken to properly store the flowers.</span><br><span class="line"></span><br><span class="line">*****TASK LIST*****</span><br><span class="line"></span><br><span class="line">6: Develop a plan for storing flowers in Beijing that takes into account the local climate conditions.</span><br><span class="line">1: Investigate the effects of different storage containers on flower preservation in Beijing.</span><br><span class="line">2: Investigate the effects of different storage materials on flower preservation in Beijing in different seasons.</span><br><span class="line">3: Analyze the impact of different types of flowers on flower storage in Beijing.</span><br><span class="line">4: Compare the cost-effectiveness of different flower storage strategies in Beijing.</span><br><span class="line">5: Research the best methods for preserving flowers in Beijing in different weather conditions.</span><br><span class="line">7: Develop a system for tracking the condition of flowers in storage in Beijing.</span><br><span class="line">8: Identify potential pests and diseases that could affect flower storage in Beijing and develop strategies to prevent them.</span><br><span class="line">9: Create a report summarizing the findings and recommendations for flower storage in Beijing, and provide suggestions for improvement.</span><br><span class="line">10: Create a checklist for flower storage in Beijing that can be used to ensure optimal conditions.</span><br><span class="line">11: Identify potential risks associated with flower storage in Beijing.</span><br><span class="line"></span><br><span class="line">*****NEXT TASK*****</span><br><span class="line"></span><br><span class="line">6: Develop a plan for storing flowers in Beijing that takes into account the local climate conditions.</span><br><span class="line"></span><br><span class="line">*****TASK RESULT*****</span><br><span class="line">Based on the previously completed tasks, I have developed a plan for storing flowers in Beijing that takes into account the local climate conditions. </span><br><span class="line"></span><br><span class="line">First, I will analyze the current climate conditions in Beijing, including temperature, humidity, and air quality. This will help me identify the most suitable materials for flower storage in Beijing. </span><br><span class="line"></span><br><span class="line">Second, I will create a to-do list of tasks that need to be completed in order to properly store the flowers. This list should include tasks such as selecting the right materials for flower storage, ensuring the flowers are kept in a cool and dry environment, and regularly monitoring the flowers for any changes in condition. </span><br><span class="line"></span><br><span class="line">Third, I will develop a strategy for flower storage that takes into account the local climate conditions. This strategy should include steps such as selecting the right materials for flower storage, ensuring the flowers are kept in a cool and dry environment, and regularly monitoring the flowers for any changes in condition. </span><br><span class="line"></span><br><span class="line">Finally, I will monitor the flowers for any changes in condition and make adjustments to the plan as needed. This will help ensure that the flowers are stored in the most suitable environment for their preservation.</span><br><span class="line"></span><br><span class="line">*****TASK ENDING*****&#x27;&#x27;&#x27;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>从结构上看，内容以循环方式进行组织，首先是 TASK LIST（任务列表），接着是 NEXT TASK（下一个任务），然后是 TASK RESULT（任务结果）。</p>
<p>每个任务结果似乎都是基于前一个任务的输出。随着自主代理思考的逐步深入，子任务的重点从获取当前的天气数据，到确定最佳的花朵储存策略，再到对策略的实际执行和调整。</p>
<p>6 轮循环之后，在任务的最终结果部分提供了具体的步骤和策略，以确保花朵在最佳的条件下储存。至于这个策略有多大用途，就仁者见仁智者见智了吧。</p>
<h2 id="总结时刻">总结时刻</h2>
<p>模拟代理主要关注模拟特定环境中的行为，而自主代理则更加关注独立性、自适应性和长期的任务执行。</p>
<p>本节课中我们介绍的 Auto-GPT、BabyAGI 以及 HuggingGPT，它们作为自主代理（Autonomous Agents）的代表，旨在创建更加普适和强大的算法，这些算法能够处理各种任务，并在没有明确编程指令的情况下自我改进。</p>
<p>这些自主代理的特点，我列表总结如下，供你参考。</p>
<p><img src="https://static001.geekbang.org/resource/image/56/d1/56d4bdbcaec0deba243a4d7cf6eb71d1.jpg?wh=1482x666" alt=""></p>
<p>未来，这种自主代理将在企业运营的任务分配、项目管理和资源调度等环节中起到至关重要的作用。想象一下，随着人工智能技术的飞速发展，会有众多的自主趋动型的应用程序被开发出来，优化任务管理，AI 将涵盖从项目开始到结束的整个过程，确保每个任务都得到有效的监控和组织。</p>
<h2 id="思考题">思考题</h2>
<ol>
<li class="lvl-4">
<p>请你阅读 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FSignificant-Gravitas%2FAutoGPT" title="https://github.com/Significant-Gravitas/AutoGPT">AutoGPT</a> 的细节，并构造自己的 AI 代理。</p>
</li>
<li class="lvl-4">
<p>请你阅读 <a href="https://link.juejin.cn/?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2303.17580.pdf" title="https://arxiv.org/pdf/2303.17580.pdf">HuggingGPT</a> 的细节，并构造自己的 AI 代理。</p>
</li>
</ol>
<p>期待在留言区看到你的分享，如果觉得内容对你有帮助，也欢迎分享给有需要的朋友！最后如果你学有余力，可以进一步学习下面的延伸阅读。</p>
<h2 id="延伸阅读">延伸阅读</h2>
<ol>
<li class="lvl-4">
<p>GitHub 项目 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2FSignificant-Gravitas%2FAutoGPT" title="https://github.com/Significant-Gravitas/AutoGPT">AutoGPT</a> <a href="https://link.juejin.cn/?target=https%3A%2F%2Fautogpt.net%2F" title="https://autogpt.net/">官网</a></p>
</li>
<li class="lvl-4">
<p>GitHub 项目 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fyoheinakajima%2Fbabyagi" title="https://github.com/yoheinakajima/babyagi">BabyAGI</a> <a href="https://link.juejin.cn/?target=https%3A%2F%2Fyoheinakajima.com%2Ftask-driven-autonomous-agent-utilizing-gpt-4-pinecone-and-langchain-for-diverse-applications%2F" title="https://yoheinakajima.com/task-driven-autonomous-agent-utilizing-gpt-4-pinecone-and-langchain-for-diverse-applications/">官网</a></p>
</li>
<li class="lvl-4">
<p>论文 <a href="https://link.juejin.cn/?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2303.17580.pdf" title="https://arxiv.org/pdf/2303.17580.pdf">HuggingGPT: Solving AI Tasks with ChatGPT and its Friends in Hugging Face</a> <a href="https://link.juejin.cn/?target=https%3A%2F%2Fhuggingface.co%2Fspaces%2Fmicrosoft%2FHuggingGPT" title="https://huggingface.co/spaces/microsoft/HuggingGPT">官网</a></p>
</li>
</ol>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/12/08/%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86/%E6%97%B6%E9%97%B4%E7%AE%A1%E7%90%86%E6%A8%A1%E5%BC%8F%E6%80%9D%E8%80%83/" rel="prev" title="">
      <i class="fa fa-chevron-left"></i> 
    </a></div>
      <div class="post-nav-item">
    <a href="/2024/12/08/%E7%BD%91%E9%A1%B5%E5%AF%BC%E5%85%A5/CAMEL%EF%BC%9A%E9%80%9A%E8%BF%87%E8%A7%92%E8%89%B2%E6%89%AE%E6%BC%94%E8%84%91%E6%9A%B4%E4%B8%80%E4%B8%AA%E9%B2%9C%E8%8A%B1%E8%90%A5%E9%94%80%E6%96%B9%E6%A1%88/" rel="next" title="">
       <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#AutoGPT"><span class="nav-number">1.</span> <span class="nav-text">AutoGPT</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Baby-AGI"><span class="nav-number">2.</span> <span class="nav-text">Baby AGI</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HuggingGPT"><span class="nav-number">3.</span> <span class="nav-text">HuggingGPT</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E6%B0%94%E5%80%99%E5%8F%98%E5%8C%96%E8%87%AA%E5%8A%A8%E5%88%B6%E5%AE%9A%E9%B2%9C%E8%8A%B1%E5%AD%98%E5%82%A8%E7%AD%96%E7%95%A5"><span class="nav-number">4.</span> <span class="nav-text">根据气候变化自动制定鲜花存储策略</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93%E6%97%B6%E5%88%BB"><span class="nav-number">5.</span> <span class="nav-text">总结时刻</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%9D%E8%80%83%E9%A2%98"><span class="nav-number">6.</span> <span class="nav-text">思考题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BB%B6%E4%BC%B8%E9%98%85%E8%AF%BB"><span class="nav-number">7.</span> <span class="nav-text">延伸阅读</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">听</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">653</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">48</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">听</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

  

</body>
</html>
